{"version":3,"sources":["webpack://tomorrow_web/./src/debug.ts","webpack://tomorrow_web/external \"stats-js\"","webpack://tomorrow_web/external \"dat.gui\"","webpack://tomorrow_web/./src/dom.ts","webpack://tomorrow_web/./src/loader.ts","webpack://tomorrow_web/./src/math.ts","webpack://tomorrow_web/./src/raf.ts","webpack://tomorrow_web/./src/three.ts","webpack://tomorrow_web/external \"three\"","webpack://tomorrow_web/webpack/bootstrap","webpack://tomorrow_web/webpack/runtime/compat get default export","webpack://tomorrow_web/webpack/runtime/define property getters","webpack://tomorrow_web/webpack/runtime/hasOwnProperty shorthand","webpack://tomorrow_web/webpack/runtime/make namespace object","webpack://tomorrow_web/webpack/startup"],"names":["enabled","document","location","href","search","folders","this","stats","body","appendChild","dom","gui","domElement","parentElement","style","zIndex","begin","end","name","expanded","folder","addFolder","open","close","label","callback","props","click","undefined","add","options","usedGUI","params","value","onChange","index","indexOf","obj","added","min","step","max","module","exports","js","dat","isiPad","test","navigator","userAgent","isiPhone","isiOS","isChrome","isSafari","isFirefox","isOpera","toLowerCase","isMobile","match","hasUserMedia","getUserMedia","webkitGetUserMedia","mozGetUserMedia","supportsWebp","elem","createElement","getContext","toDataURL","delay","seconds","Promise","resolve","timer","setTimeout","clearTimeout","fileName","path","slash","lastIndexOf","period","substring","guid","Date","now","Math","round","random","toString","supportsBlob","Blob","e","responseType","onProgress","reject","request","XMLHttpRequest","addEventListener","event","progress","loaded","total","send","loadXHR","then","image","Image","window","URL","revokeObjectURL","response","src","createObjectURL","catch","baseURL","images","promises","progression","onProgressUpdate","count","Object","keys","forEach","i","push","loadImageBlob","length","loadImageElement","imageElement","all","json","JSON","parse","autoplay","load","items","files","audio","custom","videos","setInterval","Number","isNaN","killTimer","clearInterval","onLoad","item","type","file","loadAudioElement","fileID","asset","loadJSON","loadVideoElement","DEGREES","PI","RADIANS","TWO_PI","HALF_PI","between","clamp","normalize","mix","map","min1","max1","min2","max2","roundTo","digits","toFixed","distance","x","y","d","sqrt","distance2","x1","y1","x2","y2","d1","d2","distance3","z1","z2","d3","getAngle","x0","y0","atan2","toRad","degrees","toDeg","radians","slopeFromT","t","A","B","C","xFromT","D","cubicBezier","percent","isLinear","E","F","G","current","currentx","currentslope","Infinity","H","tt","yFromT","mixArrays","start","result","playing","clock","elapsed","delta","last","performance","restart","update","callbacks","onUpdate","onRAF","requestAnimationFrame","hidden","splice","cancelAnimationFrame","orthoCamera","OrthographicCamera","plane","PlaneBufferGeometry","dispose","object","children","parent","remove","geometry","material","parseShader","shader","defines","output","definitions","join","opts","replace","includes","n","o","substr","chunk","ShaderChunk","anchorGeometry","z","applyMatrix4","Matrix4","makeTranslation","anchorGeometryTL","computeBoundingBox","box","boundingBox","setBlendNormal","blending","NormalBlending","blendEquation","AddEquation","blendSrc","SrcAlphaFactor","blendDst","OneMinusSrcAlphaFactor","needsUpdate","setBlendAdd","CustomBlending","OneFactor","setBlendMultiply","DstColorFactor","setBlendScreen","OneMinusDstColorFactor","FBO","width","height","wrapS","ClampToEdgeWrapping","wrapT","minFilter","LinearFilter","magFilter","format","RGBAFormat","HalfFloatType","FloatType","depthBuffer","stencil","rt1","WebGLRenderTarget","target","setSize","texture","DoubleFBO","super","flip","rt2","clone","Pass","camera","scene","Scene","mesh","Mesh","async","updateTextureData","svgElement","imgWid","imgHei","svgData","outerHTML","svgBlob","img","dataBase64","onload","Texture","reader","FileReader","devicePixelRatio","readAsDataURL","three","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","a","definition","key","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag"],"mappings":"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","file":"utils-three.js","sourcesContent":["import * as Stats from 'stats-js';\nimport * as dat from 'dat.gui';\n\n/**\n * Single Debugging object to house dat.gui & stats\n */\nclass DebugUtil {\n  enabled: boolean = document.location.href.search('debug') > -1;\n\n  gui: dat.GUI;\n\n  private stats: any;\n\n  private folders: Object = {};\n\n  constructor() {\n    if (!this.enabled) return;\n\n    this.stats = new Stats();\n    document.body.appendChild(this.stats.dom);\n\n    this.gui = new dat.GUI();\n    this.gui.domElement.parentElement.style.zIndex = '10000';\n  }\n\n  /**\n   * To be called before updating/rendering\n   */\n  begin() {\n    if (!this.enabled) return;\n    this.stats.begin();\n  }\n\n  /**\n   * To be called after updating/rendering\n   */\n  end() {\n    if (!this.enabled) return;\n    this.stats.end();\n  }\n\n  /**\n   * Retrieves or creates the GUI folder\n   * @param name The name of the founder\n   * @param expanded If the folder should be expanded or not\n   */\n  folder(name: string, expanded: boolean = false) {\n    // If a folder with the same name already exists, return that folder\n    if (this.folders[name]) {\n      return this.folders[name];\n    }\n\n    const folder = this.gui.addFolder(name);\n    if (!expanded) {\n      folder.close();\n    } else {\n      folder.open();\n    }\n\n    this.folders[name] = folder;\n    return this.folders[name];\n  }\n\n  /**\n   * Adds a button\n   * @param folder An optional folder\n   * @param label The button's label\n   * @param callback The callback function\n   * @returns The created GUI\n   */\n  addButton(folder: dat.gui.GUI | undefined, label: string, callback: () => void): dat.gui.GUI {\n    const props = { click: callback };\n    const usedGUI = folder !== undefined ? folder : this.gui;\n    return usedGUI.add(props, 'click').name(label);\n  }\n\n  /**\n   * A list of items\n   * @param folder An optional folder\n   * @param label The option's label\n   * @param options The array of options\n   * @param callback The callback function\n   * @returns The created GUI\n   */\n  addOptions(\n    folder: dat.gui.GUI | undefined,\n    label: string,\n    options: Array<any>,\n    callback: (value: any, index: number) => void\n  ): dat.gui.GUI {\n    const usedGUI = folder !== undefined ? folder : this.gui;\n    const params = {\n      value: options[0]\n    };\n    return usedGUI.add(params, 'value', options).onChange((value: any) => {\n      const index = options.indexOf(value);\n      callback(value, index);\n    }).name(label);\n  }\n\n  /**\n   * An object to \n   * @param folder An optional folder\n   * @param obj The object with the value\n   * @param value The value you want to modify/listen to\n   * @param props Optional predefined options\n   * @returns The created GUI\n   */\n  addInput(\n    folder: dat.gui.GUI | undefined,\n    obj: any,\n    value: string,\n    props?: any\n  ): dat.gui.GUI {\n    const usedGUI = folder !== undefined ? folder : this.gui;\n    let added: dat.gui.GUI = usedGUI;\n\n    if (props !== undefined) {\n      if (props.min !== undefined) {\n        if (props.step !== undefined) {\n          added = usedGUI.add(obj, value, props.min, props.max, props.step);\n        } else {\n          added = usedGUI.add(obj, value, props.min, props.max);\n        }\n      }\n    } else {\n      added = usedGUI.add(obj, value);\n    }\n\n    if (added !== undefined) {\n      if (props !== undefined) {\n        if (props.label !== undefined) added.name(props.label);\n        if (props.onChange !== undefined) {\n          added.onChange(() => {\n            props.onChange();\n          });\n        }\n      }\n    }\n\n    return added;\n  }\n}\n\nexport default new DebugUtil();\n","module.exports = stats-js;","module.exports = dat.gui;","export const isiPad = /iPad/i.test(navigator.userAgent);\nexport const isiPhone = /iPhone/i.test(navigator.userAgent);\nexport const isiOS = isiPad || isiPhone;\nexport const isChrome = /chrome/i.test(navigator.userAgent);\nexport const isSafari = /^((?!chrome).)*safari/i.test(navigator.userAgent);\nexport const isFirefox = navigator.userAgent.indexOf('Firefox') > -1;\nexport const isOpera = navigator.userAgent.toLowerCase().indexOf('op') > -1;\nexport const isMobile = navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/) !== null;\n\nexport const hasUserMedia = (navigator.getUserMedia\n  || navigator.webkitGetUserMedia\n  || navigator.mozGetUserMedia\n) !== undefined;\n\nexport const supportsWebp = (() => {\n  const elem = document.createElement('canvas');\n  if (elem.getContext && elem.getContext('2d')) {\n    return elem.toDataURL('image/webp').indexOf('data:image/webp') === 0;\n  }\n  return false;\n})();\n\n/**\n * Delays the call in X-seconds\n * @param seconds In seconds\n * @returns A Promise once the delay is complete\n */\nexport function delay(seconds: number): Promise<void> {\n  return new Promise((resolve) => {\n    let timer: any = setTimeout(() => {\n      clearTimeout(timer);\n      timer = undefined;\n      resolve();\n    }, seconds * 1000);\n  });\n}\n\n/**\n * Strips apart the string to retrieve a file name without the file extension\n * @param path The URL\n * @returns The file name\n */\nexport function fileName(path: string): string {\n  const slash = path.lastIndexOf('/') + 1;\n  const period = path.lastIndexOf('.');\n  return path.substring(slash, period);\n}\n\n/**\n * A generated unique ID\n * @returns A unique ID\n */\nexport function guid(): string {\n  return (Date.now() + Math.round(Math.random() * 99999)).toString();\n}\n","/**\n * Promise-based loader\n */\nimport { fileName } from './dom';\n\nclass LoadHelper {\n  supportsBlob = false;\n\n  constructor() {\n    try {\n      this.supportsBlob = !!new Blob();\n    } catch (e) {\n      this.supportsBlob = false;\n    }\n  }\n\n  /**\n   * Loads items through a XMLHttpRequest\n   * @param path The URL of the file\n   * @param responseType The type of the request\n   * @param onProgress A callback function with the loaded progress\n   */\n  async loadXHR(\n    path: string,\n    responseType: XMLHttpRequestResponseType,\n    onProgress: (progress: number) => void\n  ): Promise<XMLHttpRequest> {\n    return new Promise<XMLHttpRequest>((resolve, reject) => {\n      const request = new XMLHttpRequest();\n      request.open('GET', path, true);\n      request.responseType = responseType;\n      request.addEventListener('progress', (event: ProgressEvent) => {\n        const progress = event.loaded / event.total;\n        onProgress(progress);\n      }, false);\n      request.addEventListener('load', () => {\n        resolve(request);\n      }, false);\n      request.addEventListener('error', () => {\n        reject();\n      }, false);\n      request.send();\n    });\n  }\n\n  /**\n   * Loads an XHR Image\n   * @param path The URL of the image\n   * @param onProgress A callback function with the loaded progress\n   */\n  async loadImageBlob(\n    path: string,\n    onProgress: (progress: number) => void\n  ): Promise<HTMLImageElement> {\n    return new Promise<HTMLImageElement>((resolve, reject) => {\n      this.loadXHR(path, 'blob', onProgress)\n        .then((request: XMLHttpRequest) => {\n          const image = new Image();\n          window.URL.revokeObjectURL(request.response);\n          image.src = window.URL.createObjectURL(request.response);\n\n          resolve(image);\n        })\n        .catch(reject);\n    });\n  }\n\n  /**\n   * Loads an HTML Image Element\n   * @param path The URL of the image\n   * @returns A Promise with the image as a param\n   */\n  async loadImageElement(\n    path: string\n  ): Promise<HTMLImageElement> {\n    return new Promise<HTMLImageElement>((resolve, reject) => {\n      const request = new Image();\n      request.addEventListener('error', () => {\n        reject();\n      }, false);\n      request.addEventListener('load', () => {\n        resolve(request);\n      }, false);\n      request.src = path;\n    });\n  }\n\n  /**\n   * Loads a set of images\n   * @param baseURL If the images share a common URL, set the base to shed redundancy\n   * @param images An array of images to load\n   * @param onProgress A callback function with the loaded progress\n   */\n  async loadImages(\n    baseURL: string,\n    images: Array<string>,\n    onProgress: (progress: number) => void\n  ): Promise<HTMLImageElement[]> {\n    // All the Promises\n    const promises: Promise<HTMLImageElement>[] = [];\n    if (this.supportsBlob) {\n      // On Progress Update\n      const progression = {};\n      const onProgressUpdate = () => {\n        let total = 0;\n        let count = 0;\n        Object.keys(progression).forEach((i) => {\n          count++;\n          total += progression[i];\n        });\n\n        const progress = total / count;\n        onProgress(progress);\n      };\n      images.forEach((image: string) => {\n        progression[image] = 0;\n        promises.push(this.loadImageBlob(baseURL + image, (progress: number) => {\n          progression[image] = progress;\n          onProgressUpdate();\n        }));\n      });\n    } else {\n      let loaded = 0;\n      const total = images.length;\n      images.forEach((image: string) => {\n        promises.push(new Promise((resolve, reject) => {\n          this.loadImageElement(baseURL + image)\n            .then((imageElement: HTMLImageElement) => {\n              ++loaded;\n              const progress = loaded / total;\n              onProgress(progress);\n              resolve(imageElement);\n            }).catch(reject);\n        }));\n      });\n    }\n\n    return Promise.all(promises);\n  }\n\n  /**\n   * Loads a JSON file\n   * @param path The URL of the JSON\n   * @param onProgress A callback function with the loaded progress\n   */\n  async loadJSON(\n    path: string,\n    onProgress: (progress: number) => void\n  ): Promise<any> {\n    return new Promise<any>((resolve, reject) => {\n      this.loadXHR(path, 'json', onProgress)\n        .then((request: XMLHttpRequest) => {\n          let json = request.response;\n          if (typeof json === 'string') {\n            json = JSON.parse(json);\n          }\n          resolve(json);\n        })\n        .catch(reject);\n    });\n  }\n\n  /**\n   * Loads an HTML Audio Element\n   * @param path The URL of the audio\n   * @returns A Promise with the audio as a param\n   */\n  async loadAudioElement(\n    path: string\n  ): Promise<HTMLAudioElement> {\n    return new Promise<HTMLAudioElement>((resolve, reject) => {\n      const request = document.createElement('audio') as HTMLAudioElement;\n      request.autoplay = false;\n      request.src = path;\n      request.addEventListener('error', () => {\n        reject();\n      }, false);\n      request.addEventListener('canplaythrough', () => {\n        resolve(request);\n      }, false);\n      request.load();\n    });\n  }\n\n  /**\n   * Loads an HTML Video Element\n   * @param path The URL of the video\n   * @returns A Promise with the video as a param\n   */\n  async loadVideoElement(\n    path: string\n  ): Promise<HTMLVideoElement> {\n    return new Promise<HTMLVideoElement>((resolve, reject) => {\n      const request = document.createElement('video') as HTMLVideoElement;\n      request.autoplay = false;\n      request.src = path;\n      request.addEventListener('error', () => {\n        reject();\n      }, false);\n      request.addEventListener('canplaythrough', () => {\n        resolve(request);\n      }, false);\n      request.load();\n    });\n  }\n\n  /**\n   * Used to load an entire chunk of assets (an entire page, section, etc.)\n   * @param items An Array of items to load\n   * @param onProgress A callback function with the loaded progress\n   * @returns An object of the loaded files { audio, custom, images, json, videos }\n   */\n  async loadAssets(\n    items: Array<any>,\n    onProgress: (progress: number) => void\n  ): Promise<any> {\n    return new Promise<any>((resolve, reject) => {\n      let loaded = 0;\n      const total = items.length;\n      const files = {\n        audio: {},\n        custom: {},\n        images: {},\n        json: {},\n        videos: {}\n      };\n\n      if (total < 1) {\n        onProgress(1);\n        resolve(files);\n        return;\n      }\n\n      let timer: any = setInterval(() => {\n        const progress = loaded / (total - 1);\n        onProgress(Number.isNaN(progress) ? 0 : progress);\n      }, 1000 / 30);\n\n      const killTimer = () => {\n        clearInterval(timer);\n        timer = undefined;\n      };\n\n      const onLoad = () => {\n        ++loaded;\n        if (loaded >= total) {\n          onProgress(1);\n          killTimer();\n          resolve(files);\n        }\n      };\n\n      items.forEach((item: any) => {\n        const { type } = item;\n        const { file } = item;\n        switch (type) {\n          case 'audio':\n            this.loadAudioElement(file).then((audio: HTMLAudioElement) => {\n              const fileID = fileName(file);\n              files.audio[fileID] = audio;\n              onLoad();\n            }).catch(() => {\n              killTimer();\n              // eslint-disable-next-line\n              reject(`Error loading: ${file}`);\n            });\n            break;\n          case 'custom':\n            item.load(file).then((asset: any) => {\n              const fileID = fileName(file);\n              files.custom[fileID] = asset;\n              onLoad();\n            }).catch(() => {\n              killTimer();\n              // eslint-disable-next-line\n              reject(`Error loading: ${file}`);\n            });\n            break;\n          default:\n          case 'image':\n            this.loadImageElement(file).then((image: HTMLImageElement) => {\n              const fileID = fileName(file);\n              files.images[fileID] = image;\n              onLoad();\n            }).catch(() => {\n              killTimer();\n              // eslint-disable-next-line\n              reject(`Error loading: ${file}`);\n            });\n            break;\n          case 'json':\n            this.loadJSON(file, () => { }).then((json: any) => {\n              const fileID = fileName(file);\n              files.json[fileID] = json;\n              onLoad();\n            }).catch(() => {\n              killTimer();\n              // eslint-disable-next-line\n              reject(`Error loading: ${file}`);\n            });\n            break;\n          case 'video':\n            this.loadVideoElement(file).then((image: HTMLVideoElement) => {\n              const fileID = fileName(file);\n              files.videos[fileID] = image;\n              onLoad();\n            }).catch(() => {\n              killTimer();\n              // eslint-disable-next-line\n              reject(`Error loading: ${file}`);\n            });\n            break;\n        }\n      });\n    });\n  }\n}\n\nexport default new LoadHelper();\n","export const DEGREES = 180 / Math.PI;\nexport const RADIANS = Math.PI / 180;\nexport const TWO_PI: number = Math.PI * 2;\nexport const HALF_PI: number = Math.PI / 2;\n\n/**\n * Checks if the number is between both the min/max numbers\n * @param min The minimum number\n * @param max The maximum number\n * @param value Your value\n */\nexport function between(min: number, max: number, value: number) {\n  return value >= min && value <= max;\n}\n\n/**\n * Restricts your number to the min/max values\n * @param min Minimum value\n * @param max Maximum value\n * @param value Your value\n */\nexport function clamp(min: number, max: number, value: number) {\n  return Math.min(max, Math.max(min, value));\n}\n\n/**\n * Ensures your value is between 0 - 1\n * @param min Minimum value\n * @param max Maximum value\n * @param value Your value\n */\nexport function normalize(min: number, max: number, value: number) {\n  return (value - min) / (max - min);\n}\n\n/**\n * Interpolates values between the min and max values\n * @param min Minimum value\n * @param max Maximum value\n * @param value Your value\n */\nexport function mix(min: number, max: number, value: number) {\n  return min * (1 - value) + max * value;\n}\n\n/**\n * Transforms your value from one set to another (ie. 0 - 1 to 0 - 10, etc)\n * @param min1 The original minimum value\n * @param max1 The original maximum value\n * @param min2 The new minimum value\n * @param max2 The new maximum value\n * @param value A value between 0 - 1\n */\nexport function map(min1: number, max1: number, min2: number, max2: number, value: number) {\n  return mix(min2, max2, normalize(min1, max1, value));\n}\n\n/**\n * Rounds your value to a specific amount of digits\n * @param value Your number\n * @param digits How many decimals the number should have\n */\nexport function roundTo(value: number, digits: number = 1): number {\n  return Number(value.toFixed(digits));\n}\n\n/**\n * The distance between 1 number and another\n * @param x Point A\n * @param y Point B\n */\nexport function distance(x: number, y: number): number {\n  const d = x - y;\n  return Math.sqrt(d * d);\n}\n\n/**\n * The 2D distance between 1 2D Vector and another\n * @param x1 First Vector X\n * @param y1 First Vector Y\n * @param x2 Second Vector X\n * @param y2 Second Vector Y\n */\nexport function distance2(x1: number, y1: number, x2: number, y2: number): number {\n  const d1 = x1 - x2;\n  const d2 = y1 - y2;\n  return Math.sqrt(d1 * d1 + d2 * d2);\n}\n\n/**\n * The 3D distance between 1 3D Vector and another\n * @param x1 First Vector X\n * @param y1 First Vector Y\n * @param z1 First Vector Z\n * @param x2 Second Vector X\n * @param y2 Second Vector Y\n * @param z2 Second Vector Z\n */\nexport function distance3(\n  x1: number, y1: number, z1: number,\n  x2: number, y2: number, z2: number\n): number {\n  const d1 = x1 - x2;\n  const d2 = y1 - y2;\n  const d3 = z1 - z2;\n  return Math.sqrt(d1 * d1 + d2 * d2 + d3 * d3);\n}\n\n/**\n * A random number between 2 numbers\n * @param min Minimum number\n * @param max Maximum number\n */\nexport function random(min: number, max: number): number {\n  return mix(min, max, Math.random());\n}\n\n/**\n * The angle between 2 2D Vectors\n * @param x0 First Vector X\n * @param y0 First Vector Y\n * @param x1 Second Vector X\n * @param y1 Second Vector Y\n * @returns \n */\nexport function getAngle(x0: number, y0: number, x1: number, y1: number): number {\n  return Math.atan2(y1 - y0, x1 - x0);\n}\n\n/**\n * Translates degrees to radians\n * @param degrees Your value\n */\nexport function toRad(degrees: number): number {\n  return degrees * RADIANS;\n}\n\n/**\n * Translates radians to degrees\n * @param radians Your value\n */\nexport function toDeg(radians: number): number {\n  return radians * DEGREES;\n}\n\n// Bezier\n\nfunction isLinear(x0: number, y0: number, x1: number, y1: number): boolean {\n  return x0 === y0 && x1 === y1;\n}\n\nfunction slopeFromT(t: number, A: number, B: number, C: number): number {\n  return 1.0 / (3.0 * A * t * t + 2.0 * B * t + C);\n}\n\nfunction xFromT(t: number, A: number, B: number, C: number, D: number): number {\n  return A * (t * t * t) + B * (t * t) + C * t + D;\n}\n\nfunction yFromT(t: number, E: number, F: number, G: number, H: number): number {\n  const tt = t * t;\n  return E * (tt * t) + F * tt + G * t + H;\n}\n\n/**\n * Cubic Bezier easing\n * @param percent A number between 0 - 1\n * @param x0 First vector X\n * @param y0 First vector Y\n * @param x1 Second vector X\n * @param y1 Second vector Y\n */\nexport function cubicBezier(percent: number, x0: number, y0: number, x1: number, y1: number): number {\n  if (percent <= 0) return 0;\n  if (percent >= 1) return 1;\n  if (isLinear(x0, y0, x1, y1)) return percent; // linear\n\n  const x0a = 0; // initial x\n  const y0a = 0; // initial y\n  const x1a = x0; // 1st influence x\n  const y1a = y0; // 1st influence y\n  const x2a = x1; // 2nd influence x\n  const y2a = y1; // 2nd influence y\n  const x3a = 1; // final x\n  const y3a = 1; // final y\n\n  const A = x3a - 3.0 * x2a + 3.0 * x1a - x0a;\n  const B = 3.0 * x2a - 6.0 * x1a + 3.0 * x0a;\n  const C = 3.0 * x1a - 3.0 * x0a;\n  const D = x0a;\n\n  const E = y3a - 3.0 * y2a + 3.0 * y1a - y0a;\n  const F = 3.0 * y2a - 6.0 * y1a + 3.0 * y0a;\n  const G = 3.0 * y1a - 3.0 * y0a;\n  const H = y0a;\n\n  let current = percent;\n  for (let i = 0; i < 5; i++) {\n    const currentx = xFromT(current, A, B, C, D);\n    let currentslope = slopeFromT(current, A, B, C);\n    if (currentslope === Infinity) currentslope = percent;\n    current -= (currentx - percent) * (currentslope);\n    current = Math.min(Math.max(current, 0.0), 1.0);\n  }\n\n  return yFromT(current, E, F, G, H);\n}\n\n/**\n * Interpolates between 2 arrays\n * @param min Starting array\n * @param max Ending value\n * @param value Your value between 0 - 1\n */\nexport function mixArrays(start: Array<number>, end: Array<number>, value: number): Array<number> {\n  const result: Array<number> = [];\n  const total = start.length;\n  for (let i = 0; i < total; ++i) {\n    result.push(mix(start[i], end[i], value));\n  }\n  return result;\n}\n","/**\n * A singleton object that utilizes requestAnimationFrame and pauses/plays based\n * on the browser's 'visibilitychange' events, and also keeps time.\n */\nclass RafInstance {\n  playing: boolean = false;\n\n  clock = {\n    elapsed: 0,\n    delta: 0,\n    start: 0,\n    last: 0,\n    now: () => {\n      return performance.now();\n    },\n    seconds: () => {\n      return this.clock.elapsed / 1000;\n    },\n    restart: () => {\n      this.clock.delta = 0;\n      this.clock.elapsed = 0;\n      const now = this.clock.now();\n      this.clock.start = now;\n      this.clock.last = now;\n    },\n    update: () => {\n      const now = this.clock.now();\n      this.clock.delta = now - this.clock.last;\n      if (this.clock.delta > 1000) this.clock.delta = 0;\n      this.clock.elapsed += this.clock.delta;\n      this.clock.last = now;\n    }\n  };\n\n  private callbacks: Array<() => void> = [];\n\n  private onRAF: any;\n\n  private onUpdate: any;\n\n  constructor() {\n    this.onUpdate = () => {\n      this.update();\n      this.onRAF = window.requestAnimationFrame(this.onUpdate);\n    };\n    document.addEventListener('visibilitychange', () => {\n      this.playing = !document.hidden;\n    }, false);\n  }\n\n  /**\n   * Add a RAF listener\n   * @param callback A function to be called every frame\n   */\n  add(callback: () => void) {\n    const total = this.callbacks.length;\n    for (let i = 0; i < total; ++i) {\n      if (this.callbacks[i] === callback) {\n        return;\n      }\n    }\n    this.callbacks.push(callback);\n  }\n\n  /**\n   * Removes a RAF listener\n   * @param callback A function to be called every frame\n   */\n  remove(callback: () => void) {\n    const total = this.callbacks.length;\n    for (let i = 0; i < total; ++i) {\n      if (this.callbacks[i] === callback) {\n        this.callbacks.splice(i, 1);\n        return;\n      }\n    }\n  }\n\n  /**\n   * Plays the RAF singleton\n   */\n  play() {\n    if (this.playing) return;\n    this.playing = true;\n    this.clock.restart();\n    this.onUpdate();\n  }\n\n  /**\n   * Pauses the RAF singleton\n   */\n  pause() {\n    if (!this.playing) return;\n    this.playing = false;\n    window.cancelAnimationFrame(this.onRAF);\n    this.onRAF = undefined;\n  }\n\n  /**\n   * Calls all callback functions\n   */\n  update() {\n    if (this.playing) {\n      const total = this.callbacks.length;\n      for (let i = 0; i < total; ++i) {\n        this.callbacks[i]();\n      }\n      this.clock.update();\n    }\n  }\n}\n\nexport default new RafInstance();\n","import {\n  AddEquation,\n  BufferGeometry,\n  ClampToEdgeWrapping,\n  CustomBlending,\n  DstColorFactor,\n  FloatType,\n  Geometry,\n  HalfFloatType,\n  LinearFilter,\n  Material,\n  Matrix4,\n  Mesh,\n  NormalBlending,\n  Object3D,\n  OneFactor,\n  OneMinusDstColorFactor,\n  OneMinusSrcAlphaFactor,\n  OrthographicCamera,\n  PlaneBufferGeometry,\n  RGBAFormat,\n  Scene,\n  ShaderChunk,\n  SrcAlphaFactor,\n  Texture,\n  WebGLRenderTarget,\n} from 'three';\nimport { isiOS } from './dom';\n\nexport const orthoCamera = new OrthographicCamera(-0.5, 0.5, 0.5, -0.5, 0, 1);\nexport const plane = new PlaneBufferGeometry(1, 1);\n\n/**\n * Disposes an item and it's children from memory\n * @param object The item to be removed\n */\nexport function dispose(object: Object3D | Mesh) {\n  while (object.children.length > 0) {\n    dispose(object.children[0]);\n  }\n  if (object.parent) object.parent.remove(object);\n  if (object.geometry) object.geometry.dispose();\n  if (object.material) {\n    if (object.material.map) {\n      object.material.map.dispose();\n    }\n    object.material.dispose();\n  }\n}\n\n/**\n * Replaces a large string with Three's ShaderChunk.\n * ie: #include <common> gets replaced with the actual code\n * @param shader The block of code\n * @param defines Custom array of defines to inject into your shader.\n * @param options Custom array of options to inject into your shader.\n * @returns \n */\nexport function parseShader(shader: string, defines: Array<string>, options: Array<string>) {\n  let output = shader;\n  const definitions = `// defines\\n${defines.join('\\n')}`;\n  const opts = `// options\\n${options.join('\\n')}`;\n  output = output.replace('/** DEFINES */', definitions);\n  output = output.replace('/** OPTIONS */', opts);\n\n  // example:\n  // #include <common>\n  const includes = output.match(/\\#include\\s?\\<\\s?(\\w+)\\s?\\>/gm);\n  if (includes) {\n    const total = includes.length;\n    for (let i = 0; i < total; ++i) {\n      const n = includes[i];\n      const o = n.substr(10, n.length - 11);\n      const chunk = `// ${o}\\n${ShaderChunk[o]}`;\n      output = output.replace(n, chunk);\n    }\n  }\n\n  return output;\n}\n\n/**\n * Updates your geometry to be offset\n * @param geometry Your geometry\n * @param x X-offset\n * @param y Y-offset\n * @param z Z-offset\n */\nexport function anchorGeometry(\n  geometry: Geometry | BufferGeometry,\n  x: number,\n  y: number,\n  z: number\n) {\n  geometry.applyMatrix4(new Matrix4().makeTranslation(x, -y, -z));\n}\n\n/**\n * Anchors your geometry to the top-left\n * @param geometry \n */\nexport function anchorGeometryTL(geometry: Geometry | BufferGeometry) {\n  geometry.computeBoundingBox();\n  const box = geometry.boundingBox;\n  const x = (box.max.x - box.min.x) / 2;\n  const y = (box.max.y - box.min.y) / 2;\n  anchorGeometry(geometry, x, y, 0);\n}\n\n/**\n * Sets the material blend mode to normal\n * @param material Your material\n */\nexport function setBlendNormal(material: Material) {\n  material.blending = NormalBlending;\n  material.blendEquation = AddEquation;\n  material.blendSrc = SrcAlphaFactor;\n  material.blendDst = OneMinusSrcAlphaFactor;\n  material.needsUpdate = true;\n}\n\n/**\n * Sets the material blend mode to add\n * @param material Your material\n */\nexport function setBlendAdd(material: Material) {\n  material.blending = CustomBlending;\n  material.blendEquation = AddEquation;\n  material.blendSrc = SrcAlphaFactor;\n  material.blendDst = OneFactor;\n  material.needsUpdate = true;\n}\n\n/**\n * Sets the material blend mode to multiply\n * @param material Your material\n */\nexport function setBlendMultiply(material: Material) {\n  material.blending = CustomBlending;\n  material.blendEquation = AddEquation;\n  material.blendSrc = DstColorFactor;\n  material.blendDst = OneMinusSrcAlphaFactor;\n  material.needsUpdate = true;\n}\n\n/**\n * Sets the material blend mode to screen\n * @param material Your material\n */\nexport function setBlendScreen(material: Material) {\n  material.blending = CustomBlending;\n  material.blendEquation = AddEquation;\n  material.blendSrc = OneMinusDstColorFactor;\n  material.blendDst = OneFactor;\n  material.needsUpdate = true;\n}\n\n/**\n * A \"Frame Buffer Object\" to be used generative shaders\n */\nexport class FBO {\n  rt1: WebGLRenderTarget;\n\n  target: WebGLRenderTarget;\n\n  constructor(width: number, height: number, params: any) {\n    const opts = params !== undefined ? params : {};\n    if (opts.wrapS === undefined) opts.wrapS = ClampToEdgeWrapping;\n    if (opts.wrapT === undefined) opts.wrapT = ClampToEdgeWrapping;\n    if (opts.minFilter === undefined) opts.minFilter = LinearFilter;\n    if (opts.magFilter === undefined) opts.magFilter = LinearFilter;\n    if (opts.format === undefined) opts.format = RGBAFormat;\n    if (opts.type === undefined) opts.type = isiOS ? HalfFloatType : FloatType;\n    if (opts.depthBuffer === undefined) opts.depthBuffer = false;\n    if (opts.stencil === undefined) opts.stencil = false;\n\n    this.rt1 = new WebGLRenderTarget(width, height, opts);\n    this.target = this.rt1;\n  }\n\n  /**\n   * Resizes the Render Target\n   * @param width The width of the Render Target\n   * @param height The height of the Render Target\n   */\n  resize(width: number, height: number) {\n    this.rt1.setSize(width, height);\n  }\n\n  /**\n   *\n   */\n  get texture(): Texture {\n    return this.target.texture;\n  }\n}\n\n/**\n * Meant for compute shaders (aka GPGPU shaders)\n */\nexport class DoubleFBO extends FBO {\n  rt2: WebGLRenderTarget;\n\n  flip: Boolean = true;\n\n  constructor(width: number, height: number, params: any) {\n    super(width, height, params);\n\n    this.rt2 = this.rt1.clone();\n  }\n\n  /**\n   * Resizes the Render Targets\n   * @param width The width of the Render Targets\n   * @param height The height of the Render Targets\n   */\n  resize(width: number, height: number) {\n    this.rt1.setSize(width, height);\n    this.rt2.setSize(width, height);\n  }\n\n  /**\n   *\n   */\n  swap() {\n    if (this.flip) {\n      this.target = this.rt2;\n    } else {\n      this.target = this.rt1;\n    }\n    this.flip = !this.flip;\n  }\n}\n\n/**\n * Renders your material off-screen\n */\nexport class Pass {\n  camera: OrthographicCamera = orthoCamera;\n\n  scene: Scene = new Scene();\n\n  material: Material;\n\n  mesh: Mesh;\n\n  /**\n   * A layer that can be used for post-processing, GPGPU, etc\n   * @param  {Material} material Usually either a ShaderMaterial or RawShaderMaterial\n   */\n  constructor(material: Material) {\n    this.material = material;\n    this.mesh = new Mesh(plane, this.material);\n    this.scene.add(this.mesh);\n  }\n\n  /**\n   * The customized draw call for the pass, usually so params can be updated/swapped\n   */\n  draw() {\n  }\n}\n\n/**\n * Creates a Texture from the SVG and returns the texture when ready\n * @param svgElement Your SVG element\n * @param imgWid The content width\n * @param imgHei The content height\n */\nexport async function updateTextureData(\n  svgElement: SVGElement,\n  imgWid: number,\n  imgHei: number\n): Promise<Texture> {\n  return new Promise((resolve) => {\n    // 2\n    const svgData = svgElement.outerHTML;\n    // @ts-ignore\n    const svgBlob = new Blob([[svgData]], { type: 'image/svg+xml' });\n\n    // 3\n    let texture: Texture;\n    const img = new Image();\n    img.onload = () => {\n      // Create Texture\n      texture = new Texture(img);\n      texture.minFilter = LinearFilter;\n      texture.magFilter = LinearFilter;\n      texture.needsUpdate = true;\n\n      resolve(texture);\n    };\n\n    let dataBase64: any;\n    const reader = new FileReader();\n    reader.onload = () => {\n      dataBase64 = reader.result;\n      img.src = dataBase64;\n      img.width = imgWid * devicePixelRatio;\n      img.height = imgHei * devicePixelRatio;\n    };\n\n    dataBase64 = reader.readAsDataURL(svgBlob);\n  });\n}\n","module.exports = three;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n__webpack_require__(0);\n// This entry module is referenced by other modules so it can't be inlined\n__webpack_require__(3);\n__webpack_require__(4);\n__webpack_require__(5);\n__webpack_require__(6);\nvar __webpack_exports__ = __webpack_require__(7);\n"],"sourceRoot":""}