(()=>{"use strict";var t=[(t,e,n)=>{n.r(e),n.d(e,{default:()=>a});var o=n(1),s=n(2);const a=new class{constructor(){this.enabled=document.location.href.search("debug")>-1,this.folders={},this.enabled&&(this.stats=new o,document.body.appendChild(this.stats.dom),this.gui=new s.GUI,this.gui.domElement.parentElement.style.zIndex="10000")}begin(){this.enabled&&this.stats.begin()}end(){this.enabled&&this.stats.end()}folder(t,e=!1){if(this.folders[t])return this.folders[t];const n=this.gui.addFolder(t);return e?n.open():n.close(),this.folders[t]=n,this.folders[t]}addButton(t,e,n){const o={click:n};return(void 0!==t?t:this.gui).add(o,"click").name(e)}addOptions(t,e,n,o){const s=void 0!==t?t:this.gui,a={value:n[0]};return s.add(a,"value",n).onChange((t=>{const e=n.indexOf(t);o(t,e)})).name(e)}addInput(t,e,n,o){const s=void 0!==t?t:this.gui;let a=s;return void 0!==o?void 0!==o.min&&(a=void 0!==o.step?s.add(e,n,o.min,o.max,o.step):s.add(e,n,o.min,o.max)):a=s.add(e,n),void 0!==a&&void 0!==o&&(void 0!==o.label&&a.name(o.label),void 0!==o.onChange&&a.onChange((()=>{o.onChange()}))),a}}},t=>{t.exports=stats-js},t=>{t.exports=dat.gui},(t,e,n)=>{n.r(e),n.d(e,{isiPad:()=>o,isiPhone:()=>s,isiOS:()=>a,isChrome:()=>r,isSafari:()=>i,isFirefox:()=>c,isOpera:()=>d,isMobile:()=>l,hasUserMedia:()=>u,supportsWebp:()=>h,delay:()=>m,fileName:()=>g,guid:()=>f});const o=/iPad/i.test(navigator.userAgent),s=/iPhone/i.test(navigator.userAgent),a=o||s,r=/chrome/i.test(navigator.userAgent),i=/^((?!chrome).)*safari/i.test(navigator.userAgent),c=navigator.userAgent.indexOf("Firefox")>-1,d=navigator.userAgent.toLowerCase().indexOf("op")>-1,l=null!==navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/),u=void 0!==(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia),h=(()=>{const t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))&&0===t.toDataURL("image/webp").indexOf("data:image/webp")})();function m(t){return new Promise((e=>{let n=setTimeout((()=>{clearTimeout(n),n=void 0,e()}),1e3*t)}))}function g(t){const e=t.lastIndexOf("/")+1,n=t.lastIndexOf(".");return t.substring(e,n)}function f(){return(Date.now()+Math.round(99999*Math.random())).toString()}},(t,e,n)=>{n.r(e),n.d(e,{default:()=>s});var o=n(3);const s=new class{constructor(){this.supportsBlob=!1;try{this.supportsBlob=!!new Blob}catch(t){this.supportsBlob=!1}}async loadXHR(t,e,n){return new Promise(((o,s)=>{const a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType=e,a.addEventListener("progress",(t=>{const e=t.loaded/t.total;n(e)}),!1),a.addEventListener("load",(()=>{o(a)}),!1),a.addEventListener("error",(()=>{s()}),!1),a.send()}))}async loadImageBlob(t,e){return new Promise(((n,o)=>{this.loadXHR(t,"blob",e).then((t=>{const e=new Image;window.URL.revokeObjectURL(t.response),e.src=window.URL.createObjectURL(t.response),n(e)})).catch(o)}))}async loadImageElement(t){return new Promise(((e,n)=>{const o=new Image;o.addEventListener("error",(()=>{n()}),!1),o.addEventListener("load",(()=>{e(o)}),!1),o.src=t}))}async loadImages(t,e,n){const o=[];if(this.supportsBlob){const s={},a=()=>{let t=0,e=0;Object.keys(s).forEach((n=>{e++,t+=s[n]}));n(t/e)};e.forEach((e=>{s[e]=0,o.push(this.loadImageBlob(t+e,(t=>{s[e]=t,a()})))}))}else{let s=0;const a=e.length;e.forEach((e=>{o.push(new Promise(((o,r)=>{this.loadImageElement(t+e).then((t=>{++s;n(s/a),o(t)})).catch(r)})))}))}return Promise.all(o)}async loadJSON(t,e){return new Promise(((n,o)=>{this.loadXHR(t,"json",e).then((t=>{let e=t.response;"string"==typeof e&&(e=JSON.parse(e)),n(e)})).catch(o)}))}async loadAudioElement(t){return new Promise(((e,n)=>{const o=document.createElement("audio");o.autoplay=!1,o.src=t,o.addEventListener("error",(()=>{n()}),!1),o.addEventListener("canplaythrough",(()=>{e(o)}),!1),o.load()}))}async loadVideoElement(t){return new Promise(((e,n)=>{const o=document.createElement("video");o.autoplay=!1,o.src=t,o.addEventListener("error",(()=>{n()}),!1),o.addEventListener("canplaythrough",(()=>{e(o)}),!1),o.load()}))}async loadAssets(t,e){return new Promise(((n,s)=>{let a=0;const r=t.length,i={audio:{},custom:{},images:{},json:{},videos:{}};if(r<1)return e(1),void n(i);let c=setInterval((()=>{const t=a/(r-1);e(Number.isNaN(t)?0:t)}),1e3/30);const d=()=>{clearInterval(c),c=void 0},l=()=>{++a,a>=r&&(e(1),d(),n(i))};t.forEach((t=>{const{type:e}=t,{file:n}=t;switch(e){case"audio":this.loadAudioElement(n).then((t=>{const e=(0,o.fileName)(n);i.audio[e]=t,l()})).catch((()=>{d(),s(`Error loading: ${n}`)}));break;case"custom":t.load(n).then((t=>{const e=(0,o.fileName)(n);i.custom[e]=t,l()})).catch((()=>{d(),s(`Error loading: ${n}`)}));break;default:case"image":this.loadImageElement(n).then((t=>{const e=(0,o.fileName)(n);i.images[e]=t,l()})).catch((()=>{d(),s(`Error loading: ${n}`)}));break;case"json":this.loadJSON(n,(()=>{})).then((t=>{const e=(0,o.fileName)(n);i.json[e]=t,l()})).catch((()=>{d(),s(`Error loading: ${n}`)}));break;case"video":this.loadVideoElement(n).then((t=>{const e=(0,o.fileName)(n);i.videos[e]=t,l()})).catch((()=>{d(),s(`Error loading: ${n}`)}))}}))}))}}},(t,e,n)=>{n.r(e),n.d(e,{DEGREES:()=>o,RADIANS:()=>s,TWO_PI:()=>a,HALF_PI:()=>r,between:()=>i,clamp:()=>c,normalize:()=>d,mix:()=>l,map:()=>u,roundTo:()=>h,distance:()=>m,distance2:()=>g,distance3:()=>f,random:()=>p,getAngle:()=>v,toRad:()=>b,toDeg:()=>y,cubicBezier:()=>E,mixArrays:()=>P});const o=180/Math.PI,s=Math.PI/180,a=2*Math.PI,r=Math.PI/2;function i(t,e,n){return n>=t&&n<=e}function c(t,e,n){return Math.min(e,Math.max(t,n))}function d(t,e,n){return(n-t)/(e-t)}function l(t,e,n){return t*(1-n)+e*n}function u(t,e,n,o,s){return l(n,o,d(t,e,s))}function h(t,e=1){return Number(t.toFixed(e))}function m(t,e){const n=t-e;return Math.sqrt(n*n)}function g(t,e,n,o){const s=t-n,a=e-o;return Math.sqrt(s*s+a*a)}function f(t,e,n,o,s,a){const r=t-o,i=e-s,c=n-a;return Math.sqrt(r*r+i*i+c*c)}function p(t,e){return l(t,e,Math.random())}function v(t,e,n,o){return Math.atan2(o-e,n-t)}function b(t){return t*s}function y(t){return t*o}function w(t,e,n,o){return 1/(3*e*t*t+2*n*t+o)}function k(t,e,n,o,s){return e*(t*t*t)+n*(t*t)+o*t+s}function E(t,e,n,o,s){if(t<=0)return 0;if(t>=1)return 1;if(function(t,e,n,o){return t===e&&n===o}(e,n,o,s))return t;const a=1-3*o+3*e-0,r=3*o-6*e+0,i=3*e-0,c=1-3*s+3*n-0,d=3*s-6*n+0,l=3*n-0;let u=t;for(let e=0;e<5;e++){const e=k(u,a,r,i,0);let n=w(u,a,r,i);n===1/0&&(n=t),u-=(e-t)*n,u=Math.min(Math.max(u,0),1)}return function(t,e,n,o,s){const a=t*t;return e*(a*t)+n*a+o*t+s}(u,c,d,l,0)}function P(t,e,n){const o=[],s=t.length;for(let a=0;a<s;++a)o.push(l(t[a],e[a],n));return o}},(t,e,n)=>{n.r(e),n.d(e,{default:()=>o});const o=new class{constructor(){this.playing=!1,this.clock={elapsed:0,delta:0,start:0,last:0,now:()=>performance.now(),seconds:()=>this.clock.elapsed/1e3,restart:()=>{this.clock.delta=0,this.clock.elapsed=0;const t=this.clock.now();this.clock.start=t,this.clock.last=t},update:()=>{const t=this.clock.now();this.clock.delta=t-this.clock.last,this.clock.delta>1e3&&(this.clock.delta=0),this.clock.elapsed+=this.clock.delta,this.clock.last=t}},this.callbacks=[],this.onUpdate=()=>{this.update(),this.onRAF=window.requestAnimationFrame(this.onUpdate)},document.addEventListener("visibilitychange",(()=>{this.playing=!document.hidden}),!1)}add(t){const e=this.callbacks.length;for(let n=0;n<e;++n)if(this.callbacks[n]===t)return;this.callbacks.push(t)}remove(t){const e=this.callbacks.length;for(let n=0;n<e;++n)if(this.callbacks[n]===t)return void this.callbacks.splice(n,1)}play(){this.playing||(this.playing=!0,this.clock.restart(),this.onUpdate())}pause(){this.playing&&(this.playing=!1,window.cancelAnimationFrame(this.onRAF),this.onRAF=void 0)}update(){if(this.playing){const t=this.callbacks.length;for(let e=0;e<t;++e)this.callbacks[e]();this.clock.update()}}}}],e={};function n(o){var s=e[o];if(void 0!==s)return s.exports;var a=e[o]={exports:{}};return t[o](a,a.exports,n),a.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(0),n(3),n(4),n(5);n(6)})();
//# sourceMappingURL=utils-core.js.map